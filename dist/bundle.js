(()=>{"use strict";var e=document.querySelector(".calc-block"),t=e.querySelectorAll("input");var n=document.querySelectorAll("form");var o,r,c,a,l,u,i,s,d,v,m,f,p,h,g;v="12 September 2021 00:59",m=document.getElementById("timer-hours"),f=document.getElementById("timer-minutes"),p=document.getElementById("timer-seconds"),h=document.getElementById("timer-days"),g=setInterval((function(){var e,t,n,o,r=(e=(new Date(v).getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),n=Math.floor(e/60%60),o=Math.floor(e/60/60)%24,{timeRemaining:e,days:Math.floor(e/60/60/24),hours:o,minutes:n,seconds:t});r.timeRemaining<=0&&(clearInterval(g),r.days=0,r.hours=0,r.minutes=0,r.seconds=0),r.days<10?h.textContent="0".concat(r.days):h.textContent=r.days,r.hours<10?m.textContent="0".concat(r.hours):m.textContent=r.hours,r.minutes<10?f.textContent="0".concat(r.minutes):f.textContent=r.minutes,r.seconds<10?p.textContent="0".concat(r.seconds):p.textContent=r.seconds})),s=document.querySelector("menu"),d=function(){s.classList.toggle("active-menu")},document.addEventListener("click",(function(e){var t=e.target;t.closest(".menu")?d():t.closest(".close-btn")?(e.preventDefault(),d()):t.closest("menu>ul")?d():t!==t.closest("menu")&&s.classList.remove("active-menu")})),a=document.querySelector(".popup"),l=document.querySelectorAll(".popup-btn"),u=a.querySelector(".popup-content"),i=document.querySelector('a[href="#service-block"]'),l.forEach((function(e){e.addEventListener("click",(function(){var e=-400;a.style.display="block",u.style.cssText="top: ".concat(e,"px;");var t=setInterval((function(){e+=20,u.style.top=e+"px",(u.offsetTop>58||screen.width<768)&&(clearInterval(t),u.style.cssText="top: 10%;")}),10)}))})),a.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?a.style.display="none":(t=t.closest(".popup-content"))||(a.style.display="none")})),i.addEventListener("click",(function(e){e.preventDefault();var t=setInterval((function(){document.documentElement.scrollTop+=30,document.documentElement.scrollTop>830&&clearInterval(t)}),2)})),o=document.querySelector(".service-header"),r=document.querySelectorAll(".service-header-tab"),c=document.querySelectorAll(".service-tab"),o.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&r.forEach((function(e,n){e===t&&function(e){for(var t=0;t<c.length;t++)e===t?(r[t].classList.add("active"),c[t].classList.remove("d-none")):(r[t].classList.remove("active"),c[t].classList.add("d-none"))}(n)}))})),function(){for(var e,t=document.querySelectorAll(".portfolio-item"),n=(document.querySelectorAll(".portfolio-btn"),document.querySelector(".portfolio-content")),o=document.querySelector(".portfolio-dots"),r=0,c=0;c<t.length;c++){var a=document.createElement("li");0===c&&a.classList.add("dot","dot-active"),a.classList.add("dot"),o.append(a)}var l=document.querySelectorAll(".dot"),u=function(e,t,n){e[t].classList.remove(n)},i=function(e,t,n){e[t].classList.add(n)},s=function(){u(t,r,"portfolio-item-active"),u(l,r,"dot-active"),++r>=t.length&&(r=0),i(t,r,"portfolio-item-active"),i(l,r,"dot-active")},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;e=setInterval(s,t)};n.addEventListener("click",(function(e){e.preventDefault();var n=e.target;n.matches(".portfolio-btn, .dot")&&(u(t,r,"portfolio-item-active"),u(l,r,"dot-active"),n.matches("#arrow-right")?r++:n.matches("#arrow-left")?r--:n.matches(".dot")&&l.forEach((function(e,t){e===n&&(r=t)})),r>=t.length?r=0:r<0&&(r=t.length-1),i(t,r,"portfolio-item-active"),i(l,r,"dot-active"))})),n.addEventListener("mouseover",(function(t){(t.target.matches(".portfolio-btn")||t.target.matches(".dot"))&&clearInterval(e)})),n.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&d()})),d(2e3)}(),document.querySelectorAll(".command__photo").forEach((function(e){var t=e.src;e.addEventListener("mouseover",(function(e){e.target.src=e.target.dataset.img})),e.addEventListener("mouseout",(function(e){e.target.src=t}))})),function(){e.addEventListener("input",(function(e){var n=e.target;t.forEach((function(e){e===n&&(e.value=e.value.replace(/^0|\D/,""))}))}));var n=document.querySelectorAll('input[name="user_name"]'),o=document.querySelector('input[name="user_message"]'),r=document.querySelectorAll('input[name="user_email"]'),c=document.querySelectorAll('input[name="user_phone"]');n.forEach((function(e){e.addEventListener("input",(function(t){var n=t.target;if(e===n){if(""===e.value.trim())return void(e.value="");e.value=e.value.replace(/[^а-яё ]/gi,"").replace(/\s+/g," ").replace(/(?<![а-яё])[а-яё]/gi,(function(e){return e.toUpperCase()})).replace(/(?<=[А-Яа-яЁё])[а-яё]/gi,(function(e){return e.toLowerCase()}))}})),e.addEventListener("blur",(function(){e.value=e.value.trim()}))})),o.addEventListener("input",(function(){o.value=o.value.replace(/[^а-яё0-9!?\., -]/gi,"")})),o.addEventListener("blur",(function(){o.value=o.value.replace(/-{2,}/gi,"-").trim().replace(/-(?![а-яё\d])|(?<![а-яё\d])-/gi,"").replace(/\s+/g," ").replace(/(?<=[а-яё])\./gi,". ").replace(/^[^а-яё]+/g,"")})),r.forEach((function(e){e.addEventListener("blur",(function(t){if(t.target===e){if(""===e.value.trim())return void(e.value="");e.value=e.value.replace(/[^-!'~@\.\*\w]/gi,"")}}))})),c.forEach((function(e){e.addEventListener("input",(function(t){if(t.target===e){if(""===e.value.trim())return void(e.value="");e.value=e.value.replace(/[^0-9\+]/gi,"")}})),e.addEventListener("blur",(function(t){t.target===e&&(e.value.length<9||e.value.length>16)&&(e.value="")}))}))}(),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,o=document.querySelector(".calc-type"),r=document.getElementById("total");o.value="",t.forEach((function(e){return e.value=""}));var c=function(){var e=0,c=1,a=1,l=o.options[o.selectedIndex].value,u=+t[0].value;if(t[1].value>1&&(c+=(t[1].value-1)/10),t[2].value&&t[2].value<5?a*=2:t[2].value&&t[2].value<10&&(a*=1.5),l&&u){e=Math.ceil(n*l*u*c*a);var i=0,s=setInterval((function(){e<=1e3?i+=35:e>1e3&&e<5500?i+=60:e>5500&&e<1e4?i+=320:e>1e4&&(i+=550),r.textContent=i,r.textContent>=e&&(r.textContent=e,clearInterval(s))}),5)}};e.addEventListener("change",(function(e){(e.target===o||t)&&c()}))}(100),function(){var e="Загрузка...",t=0,o=document.createElement("div");o.style.cssText="font-size: 2rem; color: white",n.forEach((function(n){n.addEventListener("submit",(function(c){c.preventDefault(),n.appendChild(o),function(){var n=0,r=setInterval((function(){n<e.length&&200!==t?o.textContent+=e[n++]:n===e.length&&200!==t?(n=0,o.textContent="",o.textContent+=e[n++]):200===t&&(clearInterval(r),t=0)}),90)}();var a=new FormData(n),l={};if(a.forEach((function(e,t){l[t]=e})),r(l).then((function(e){if(200!==e.status)throw new Error;return t=e.status,e.text()})).then((function(e){console.log(e),o.textContent="Спасибо! Мы скоро с вами свяжемся!",setTimeout((function(){o.textContent=""}),3e3)})).catch((function(e){o.textContent="Что то пошло не так...",console.error(e)})),c.target===n)for(var u=n.elements,i=0;i<u.length-1;i++)u[i].value=""}))}));var r=function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}}()})();